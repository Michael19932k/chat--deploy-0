(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t){},112:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),c=a.n(o),l=(a(59),a(31));a(60),a(61),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(19);var s=function(){return r.a.createElement("div",{className:"area"},r.a.createElement("ul",{className:"circles"},r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null)))};a(62);a(63);var i=a(8);var m=function(){return r.a.createElement("div",{className:"buttonWrapper"},r.a.createElement("div",{className:"btn-group"},r.a.createElement(i.b,{to:"/LinkWindow",className:"buttonS"},"DemoChat")))},u=a(9),d=a(2),p=(a(72),Object(n.createContext)()),f=function(e){var t=e.reducer,a=e.appState,o=e.children;return r.a.createElement(p.Provider,{value:Object(n.useReducer)(t,a)},o)},E=function(){return Object(n.useContext)(p)};a(73);var h=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],o=t[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"infoWrapper"},a?r.a.createElement("div",{className:"bubble"},r.a.createElement("div",{className:"infoContentWrapper"},r.a.createElement("div",{className:"infoText"},'You and the person you want to chat with must have the same token. Press "Generate" to create a room and make sure your friend insert the same token you got. If you want to enter to existing chat simply type your nickname and insert the token of the room you want to get in. All nicknames, room tokens and chats automatically deleted from the data base every 24 hours from the moment of creation of the said room or a nickname.'),r.a.createElement("div",{className:"CloseButton",onClick:function(){o(!1),console.log("ClickedToShow",!1)}},"\xd7"))):r.a.createElement("div",null),r.a.createElement("div",{className:"info",onClick:function(e){!function(e){e.stopPropagation(),console.log("ClickedToShow",!0),o(!0)}(e)}},r.a.createElement("i",{className:"material-icons"},"info"))))};var v=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),o=a[0],c=a[1],l=Object(n.useState)(""),s=Object(d.a)(l,2),m=s[0],u=s[1],p=E(),f=Object(d.a)(p,2),v=(f[0],f[1]);return sessionStorage.setItem("name",m),r.a.createElement("div",{className:"LinkWindow"},r.a.createElement("div",{className:"minorLinkWindowWrapper"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),fetch("/generateRoomId",{method:"POST",body:JSON.stringify({userName:m,tokenValue:o}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){console.log(t),console.log(o),t.success&&(v({type:"passName",payload:{userName:m}}),e.history.push("/rooms/".concat(o)))}).catch(function(e){return console.error("Error:",e)})}},r.a.createElement("div",null,"Type your nick name"),r.a.createElement("div",{className:"InfoIconWrapper"},r.a.createElement(h,null)),r.a.createElement("input",{type:"text",required:!0,value:m,onChange:function(e){return u(e.target.value)}}),r.a.createElement("div",null,"Please enter your token here"),r.a.createElement("input",{type:"text",value:o,onChange:function(e){return c(e.target.value)}}),r.a.createElement("input",{onClick:function(){fetch("/createRoomId",{method:"POST",body:JSON.stringify({createRoomId:"Id"}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(JSON.stringify(e)),c(e.roomId)}).catch(function(e){return console.error("Error:",e)})},type:"button",value:"Generate"}),r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement(i.b,{to:"/",className:"getToMain"},"Get Back")))},g=(a(74),a(53)),b=a.n(g),y=(a(104),b()({transports:["websocket"],upgrade:!1})),N=[],k=0,O=[];var j=function(e,t,a){var o=e.match,c=E(),l=(Object(d.a)(c,1)[0],Object(n.useState)(sessionStorage.getItem("name"))),s=Object(d.a)(l,2),i=s[0],m=(s[1],Object(n.useState)(0)),u=Object(d.a)(m,2),p=(u[0],u[1]),f=Object(n.useState)([]),h=Object(d.a)(f,2),v=h[0],g=h[1],b=Object(n.useState)([]),j=Object(d.a)(b,2),S=(j[0],j[1]),w=Object(n.useRef)(null),C=o.params.id;return Object(n.useEffect)(function(){console.log("check name",i),fetch("/messages/".concat(C),{method:"POST",body:JSON.stringify({name:i}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e.messages.reverse(),g(e.messages)}).catch(function(e){return console.error("Error:",e)}),y.on("message",function(e){N.push(e),p(k+1),k++}),y.on("name",function(e){e&&(O=e,S(k+1),k++)}),y.on("updateusers",function(e){if(e){var t=e;console.log(t),O=t,e&&(S(k+1),k++)}}),y.emit("subscribe",C),y.emit("name",{name:i,room:C})},[]),Object(n.useEffect)(function(){w.current.getBoundingClientRect().height,w.current.scrollTop=w.current.scrollHeight}),r.a.createElement("div",{className:"gridWrapper"},r.a.createElement("div",{className:"original-grid-container"},r.a.createElement("div",{className:"NickNamesArea"},"Chat mates:",O.map(function(e,t){return r.a.createElement("p",{key:t},e)})),r.a.createElement("div",{className:"ChatArea",ref:w},v.map(function(e,t){return r.a.createElement("div",{className:"messageBubble",key:t},r.a.createElement("div",{className:"userName"},e.name),r.a.createElement("div",{className:"messageDate"},e.date.toString().slice(11,-8)),r.a.createElement("br",null),e.message)}),N.map(function(e,t){return r.a.createElement("div",{className:"messageBubble",key:t+"socket"},r.a.createElement("div",{className:"userName"},e.name),r.a.createElement("div",{className:"messageDate"},e.date.toString().slice(11,-8)),r.a.createElement("br",null),e.message)})),r.a.createElement("div",{className:"ChatInputArea"},r.a.createElement("div",{className:"messageInputWrapper"},r.a.createElement("textarea",{className:"messageTypingSpot",placeholder:"Press to type...",type:"text",autoFocus:!0,onKeyUp:function(e){"Enter"===e.key&&(e.target.value.length>1&&y.emit("sendMessage",{room:C,message:e.target.value,date:new Date,name:i}),e.target.value="")}})))))};c.a.render(r.a.createElement(function(){return r.a.createElement(f,{appState:{setName:[],test:"fff"},reducer:function(e,t){switch(t.type){case"passName":return Object(l.a)({},e,{setName:t.payload});case"testing":return Object(l.a)({},e,{test:t.payload});default:return e}}},r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement(s,null),r.a.createElement(u.a,{exact:!0,path:"/",component:m}),r.a.createElement(u.a,{path:"/LinkWindow",component:v}),r.a.createElement(u.a,{path:"/rooms/:id",component:j}))))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},54:function(e,t,a){e.exports=a(112)},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){}},[[54,1,2]]]);
//# sourceMappingURL=main.240b7d6e.chunk.js.map