(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t){},112:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),l=(a(59),a(31));a(60),a(61),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(19);var s=function(){return r.a.createElement("div",{className:"area"},r.a.createElement("ul",{className:"circles"},r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null)))};a(62);a(63);var i=a(8);var m=function(){return r.a.createElement("div",{className:"buttonWrapper"},r.a.createElement("div",{className:"btn-group"},r.a.createElement(i.b,{to:"/LinkWindow",className:"buttonS"},"FlashChat")))},u=a(9),d=a(2),f=(a(72),Object(n.createContext)()),p=function(e){var t=e.reducer,a=e.appState,c=e.children;return r.a.createElement(f.Provider,{value:Object(n.useReducer)(t,a)},c)},v=function(){return Object(n.useContext)(f)};a(73);var h=function(){var e=Object(n.useState)({visibility:"hidden"}),t=Object(d.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(d.a)(o,2),s=l[0],i=l[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"infoWrapper"},r.a.createElement("div",{className:"bubble",style:a},r.a.createElement("div",{className:"infoContentWrapper"},r.a.createElement("div",{className:"infoText"},'You and the person you want to chat with need to have the same token. Press "Generate" to create a room and make sure your friend insert the same token you got. If you want to enter to existing chat simply type your nickname and insert the token of the room you want to get in. All nicknames, room tokens and chats automatically deleted from the data base every 24 hours from the moment of creation of the said room or a nickname.'),r.a.createElement("div",{className:"CloseButton",onClick:function(){i(!1),c({visibility:"hidden"})}},"\xd7"))),r.a.createElement("div",{className:"info",onClick:function(){i(!0),c({visibility:"visible"})},onMouseOver:function(){c({visibility:"visible"})},onMouseOut:function(){!0===s&&c({visibility:"visible"}),c({visibility:"hidden"})}},r.a.createElement("i",{className:"material-icons"},"info"))))};var E=function(e){var t=Object(n.useState)(""),a=Object(d.a)(t,2),c=a[0],o=a[1],l=Object(n.useState)(""),s=Object(d.a)(l,2),m=s[0],u=s[1],f=v(),p=Object(d.a)(f,2),E=(p[0],p[1]);return sessionStorage.setItem("name",m),r.a.createElement("div",{className:"LinkWindow"},r.a.createElement("div",{className:"minorLinkWindowWrapper"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),fetch("generateRoomId",{method:"POST",body:JSON.stringify({userName:m,tokenValue:c}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){console.log(t),console.log(c),t.success&&(E({type:"passName",payload:{userName:m}}),e.history.push("/rooms/".concat(c)))}).catch(function(e){return console.error("Error:",e)})}},r.a.createElement("div",null,"Type your nick name"),r.a.createElement("div",{className:"InfoIconWrapper"},r.a.createElement(h,null)),r.a.createElement("input",{type:"text",required:!0,value:m,onChange:function(e){return u(e.target.value)}}),r.a.createElement("div",null,"Please enter your token here"),r.a.createElement("input",{type:"text",value:c,onChange:function(e){return o(e.target.value)}}),r.a.createElement("input",{onClick:function(){fetch("createRoomId",{method:"POST",body:JSON.stringify({createRoomId:"Id"}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){console.log(JSON.stringify(e)),o(e.roomId)}).catch(function(e){return console.error("Error:",e)})},type:"button",value:"Generate"}),r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement(i.b,{to:"/",className:"getToMain"},"Get Back")))},b=(a(74),a(53)),g=a.n(b),y=(a(104),g()({transports:["websocket"],upgrade:!1})),N=[],O=0,j=[];var k=function(e,t,a){var c=e.match,o=v(),l=(Object(d.a)(o,1)[0],Object(n.useState)(sessionStorage.getItem("name"))),s=Object(d.a)(l,2),i=s[0],m=(s[1],Object(n.useState)(0)),u=Object(d.a)(m,2),f=(u[0],u[1]),p=Object(n.useState)([]),h=Object(d.a)(p,2),E=h[0],b=h[1],g=Object(n.useState)([]),k=Object(d.a)(g,2),S=(k[0],k[1]),w=Object(n.useRef)(null),C=c.params.id;return Object(n.useEffect)(function(){console.log("check name",i),fetch("http://localhost:3001/messages/".concat(C),{method:"POST",body:JSON.stringify({name:i}),headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){e.messages.reverse(),b(e.messages)}).catch(function(e){return console.error("Error:",e)}),y.on("message",function(e){N.push(e),f(O+1),O++}),y.on("name",function(e){e&&(j=e,S(O+1),O++)}),y.on("updateusers",function(e){if(e){var t=e;console.log(t),j=t,e&&(S(O+1),O++)}}),y.emit("subscribe",C),y.emit("name",{name:i,room:C})},[]),Object(n.useEffect)(function(){w.current.getBoundingClientRect().height,w.current.scrollTop=w.current.scrollHeight}),r.a.createElement("div",{className:"gridWrapper"},r.a.createElement("div",{className:"original-grid-container"},r.a.createElement("div",{className:"NickNamesArea"},"Chat mates:",j.map(function(e,t){return r.a.createElement("p",{key:t},e)})),r.a.createElement("div",{className:"ChatArea",ref:w},E.map(function(e,t){return r.a.createElement("div",{className:"messageBubble",key:t},r.a.createElement("div",{className:"userName"},e.name),r.a.createElement("div",{className:"messageDate"},e.date.toString().slice(11,-8)),r.a.createElement("br",null),e.message)}),N.map(function(e,t){return r.a.createElement("div",{className:"messageBubble",key:t+"socket"},r.a.createElement("div",{className:"userName"},e.name),r.a.createElement("div",{className:"messageDate"},e.date.toString().slice(11,-8)),r.a.createElement("br",null),e.message)})),r.a.createElement("div",{className:"ChatInputArea"},r.a.createElement("div",{className:"messageInputWrapper"},r.a.createElement("textarea",{className:"messageTypingSpot",placeholder:"Press to type...",type:"text",autoFocus:!0,onKeyUp:function(e){"Enter"===e.key&&(e.target.value.length>1&&y.emit("sendMessage",{room:C,message:e.target.value,date:new Date,name:i}),e.target.value="")}})))))};o.a.render(r.a.createElement(function(){return r.a.createElement(p,{appState:{setName:[],test:"fff"},reducer:function(e,t){switch(t.type){case"passName":return Object(l.a)({},e,{setName:t.payload});case"testing":return Object(l.a)({},e,{test:t.payload});default:return e}}},r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement(s,null),r.a.createElement(u.a,{exact:!0,path:"/",component:m}),r.a.createElement(u.a,{path:"/LinkWindow",component:E}),r.a.createElement(u.a,{path:"/rooms/:id",component:k}))))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},54:function(e,t,a){e.exports=a(112)},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){}},[[54,1,2]]]);
//# sourceMappingURL=main.07d0018c.chunk.js.map